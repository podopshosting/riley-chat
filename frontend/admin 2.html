<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riley Admin Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header h1 { color: #2c3e50; margin-bottom: 10px; }
        .header p { color: #7f8c8d; font-size: 16px; }
        .status-bar { display: flex; gap: 20px; margin: 20px 0; }
        .status-item { padding: 10px 20px; border-radius: 20px; font-size: 14px; font-weight: 500; }
        .status-online { background: #d4edda; color: #155724; }
        .status-offline { background: #f8d7da; color: #721c24; }
        .quick-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .action-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s; }
        .action-card:hover { transform: translateY(-2px); }
        .action-icon { font-size: 24px; margin-bottom: 15px; }
        .action-title { font-size: 18px; font-weight: 600; color: #2c3e50; margin-bottom: 8px; }
        .action-desc { color: #7f8c8d; font-size: 14px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .stat-number { font-size: 32px; font-weight: 700; color: #3498db; margin-bottom: 8px; }
        .stat-label { color: #7f8c8d; font-size: 14px; }
        .conversations-panel { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .conversation-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #ecf0f1; cursor: pointer; }
        .conversation-item:hover { background: #f8f9fa; }
        .conversation-avatar { width: 40px; height: 40px; border-radius: 50%; background: #3498db; color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; }
        .conversation-details { flex: 1; }
        .conversation-name { font-weight: 600; color: #2c3e50; margin-bottom: 4px; }
        .conversation-preview { color: #7f8c8d; font-size: 14px; }
        .conversation-status { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        .status-new { background: #e3f2fd; color: #1976d2; }
        .status-active { background: #fff3e0; color: #f57c00; }
        .status-completed { background: #e8f5e8; color: #388e3c; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { background: white; width: 90%; max-width: 600px; margin: 50px auto; border-radius: 12px; padding: 30px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; color: #7f8c8d; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 600; color: #2c3e50; }
        .form-input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        .btn-primary { background: #3498db; color: white; }
        .btn-primary:hover { background: #2980b9; }
        .btn-success { background: #27ae60; color: white; }
        .btn-success:hover { background: #229954; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ Riley Admin Dashboard</h1>
            <p>Manage Riley's Salesforce Field Service integration and customer conversations</p>
            <div class="status-bar">
                <div class="status-item status-online" id="riley-status">üü¢ Riley Online</div>
                <div class="status-item status-online" id="salesforce-status">üü¢ Salesforce Connected</div>
                <div class="status-item status-online" id="sms-status">üü¢ SMS Active</div>
            </div>
        </div>

        <div class="quick-actions">
            <div class="action-card" onclick="openModal('test-sms')">
                <div class="action-icon">üì±</div>
                <div class="action-title">Test SMS</div>
                <div class="action-desc">Send a test message to Riley</div>
            </div>
            <div class="action-card" onclick="openModal('salesforce-config')">
                <div class="action-icon">‚öôÔ∏è</div>
                <div class="action-title">Salesforce Config</div>
                <div class="action-desc">Update Salesforce credentials</div>
            </div>
            <div class="action-card" onclick="viewAppointments()">
                <div class="action-icon">üìÖ</div>
                <div class="action-title">View Appointments</div>
                <div class="action-desc">See scheduled FSL appointments</div>
            </div>
            <div class="action-card" onclick="exportData()">
                <div class="action-icon">üìä</div>
                <div class="action-title">Export Data</div>
                <div class="action-desc">Download conversation reports</div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="total-conversations">0</div>
                <div class="stat-label">Total Conversations</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="appointments-booked">0</div>
                <div class="stat-label">Appointments Booked</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="conversion-rate">0%</div>
                <div class="stat-label">Conversion Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avg-response-time">2.3s</div>
                <div class="stat-label">Avg Response Time</div>
            </div>
        </div>

        <div class="conversations-panel">
            <h3 style="margin-bottom: 20px; color: #2c3e50;">Recent Conversations</h3>
            <div id="conversations-list">
                <div class="conversation-item">
                    <div class="conversation-avatar">JS</div>
                    <div class="conversation-details">
                        <div class="conversation-name">John Smith</div>
                        <div class="conversation-preview">Roofing appointment confirmed for Monday</div>
                    </div>
                    <div class="conversation-status status-completed">Completed</div>
                </div>
                <div class="conversation-item">
                    <div class="conversation-avatar">SJ</div>
                    <div class="conversation-details">
                        <div class="conversation-name">Sarah Johnson</div>
                        <div class="conversation-preview">Looking at siding repair options...</div>
                    </div>
                    <div class="conversation-status status-active">Active</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Test SMS Modal -->
    <div id="test-sms" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Test SMS to Riley</h3>
                <button class="close-btn" onclick="closeModal('test-sms')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Your Phone Number</label>
                <input type="tel" class="form-input" id="test-phone" placeholder="+1234567890">
            </div>
            <div class="form-group">
                <label class="form-label">Test Message</label>
                <input type="text" class="form-input" id="test-message" placeholder="Hello Riley" value="Hello Riley">
            </div>
            <button class="btn btn-primary" onclick="sendTestSMS()">Send Test SMS</button>
        </div>
    </div>

    <!-- Salesforce Config Modal -->
    <div id="salesforce-config" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Salesforce Configuration</h3>
                <button class="close-btn" onclick="closeModal('salesforce-config')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Instance URL</label>
                <input type="text" class="form-input" id="sf-instance" value="https://pandaexteriors.my.salesforce.com">
            </div>
            <div class="form-group">
                <label class="form-label">Username</label>
                <input type="text" class="form-input" id="sf-username" value="robwinters@pandaexteriors.com">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="sf-password" placeholder="Enter password">
            </div>
            <div class="form-group">
                <label class="form-label">Security Token</label>
                <input type="password" class="form-input" id="sf-token" placeholder="Enter security token">
            </div>
            <button class="btn btn-success" onclick="updateSalesforceConfig()">Update Configuration</button>
        </div>
    </div>

    <script>
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function sendTestSMS() {
            const phone = document.getElementById('test-phone').value;
            const message = document.getElementById('test-message').value;
            
            if (!phone || !message) {
                alert('Please fill in all fields');
                return;
            }
            
            // Send test SMS via API
            fetch('https://your-api-endpoint.com/test-sms', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ to: phone, message: message })
            })
            .then(response => response.json())
            .then(data => {
                alert('Test SMS sent successfully!');
                closeModal('test-sms');
            })
            .catch(error => {
                alert('Error sending SMS: ' + error.message);
            });
        }

        function updateSalesforceConfig() {
            const config = {
                instance: document.getElementById('sf-instance').value,
                username: document.getElementById('sf-username').value,
                password: document.getElementById('sf-password').value,
                token: document.getElementById('sf-token').value
            };
            
            // Update Salesforce config via API
            fetch('https://your-api-endpoint.com/update-salesforce', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(config)
            })
            .then(response => response.json())
            .then(data => {
                alert('Salesforce configuration updated successfully!');
                closeModal('salesforce-config');
                location.reload();
            })
            .catch(error => {
                alert('Error updating configuration: ' + error.message);
            });
        }

        function viewAppointments() {
            window.open('http://riley-dashboard-1754514173.s3-website-us-east-1.amazonaws.com/', '_blank');
        }

        function exportData() {
            // Export conversation data
            const data = {
                conversations: [],
                appointments: [],
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `riley-data-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
        }

        // Load dashboard data
        async function loadDashboardData() {
            try {
                // Load stats and conversations
                document.getElementById('total-conversations').textContent = '12';
                document.getElementById('appointments-booked').textContent = '8';
                document.getElementById('conversion-rate').textContent = '67%';
            } catch (error) {
                console.error('Error loading dashboard data:', error);
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', loadDashboardData);
    </script>
</body>
</html>